"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3140],{2101:(a,e,t)=>{t.d(e,{Ay:()=>R,Dc:()=>H,ET:()=>s,KR:()=>m,Nh:()=>i,OB:()=>u,OD:()=>d,ZA:()=>I,Zq:()=>r,Zy:()=>c,_6:()=>v,gi:()=>f,i0:()=>S,nr:()=>p,qc:()=>o,qf:()=>A,r1:()=>l,rl:()=>y,xs:()=>E});let n=(0,t(9267).Z0)({name:"student",initialState:{data:{enrollmentHistory:[],cancellationHistory:[],calendarSessions:[],calendarRange:null},isLoading:!1,error:null},reducers:{setStudentData:(a,e)=>{a.data=e.payload},setLoading:(a,e)=>{a.isLoading=e.payload},setError:(a,e)=>{a.error=e.payload},clearError:a=>{a.error=null},updateStudentEnrollmentHistory:(a,e)=>{a.data&&(a.data.enrollmentHistory=e.payload)},updateStudentCancellationHistory:(a,e)=>{a.data&&(a.data.cancellationHistory=e.payload)},setCalendarSessions:(a,e)=>{a.data&&(a.data.calendarSessions=e.payload)},setCalendarRange:(a,e)=>{a.data&&(a.data.calendarRange=e.payload)},updateStudentEnrollment:(a,e)=>{var t;if(null==(t=a.data)?void 0:t.enrollmentHistory){let t=a.data.enrollmentHistory.findIndex(a=>a.id===e.payload.id);-1!==t&&(a.data.enrollmentHistory[t]=e.payload)}},updateStudentCancellation:(a,e)=>{var t;if(null==(t=a.data)?void 0:t.cancellationHistory){let t=a.data.cancellationHistory.findIndex(a=>a.id===e.payload.id);-1!==t&&(a.data.cancellationHistory[t]=e.payload)}},addCalendarSession:(a,e)=>{a.data&&a.data.calendarSessions.push(e.payload)},updateCalendarSession:(a,e)=>{var t;if(null==(t=a.data)?void 0:t.calendarSessions){let t=a.data.calendarSessions.findIndex(a=>a.id===e.payload.id);-1!==t&&(a.data.calendarSessions[t]=e.payload)}},removeCalendarSession:(a,e)=>{var t;(null==(t=a.data)?void 0:t.calendarSessions)&&(a.data.calendarSessions=a.data.calendarSessions.filter(a=>a.id!==e.payload))},clearStudentData:a=>{a.data={enrollmentHistory:[],cancellationHistory:[],calendarSessions:[],calendarRange:null}},addOptimisticEnrollment:(a,e)=>{if(a.data){let t={...e.payload,isOptimistic:!0};a.data.enrollmentHistory.unshift(t)}},replaceOptimisticEnrollment:(a,e)=>{var t;if(null==(t=a.data)?void 0:t.enrollmentHistory){let{optimisticId:t,realEnrollment:n}=e.payload,d=a.data.enrollmentHistory.findIndex(a=>a.id===t);-1!==d&&a.data.enrollmentHistory.splice(d,1);let l=a.data.enrollmentHistory.findIndex(a=>a.id===n.id);-1!==l&&a.data.enrollmentHistory.splice(l,1),a.data.enrollmentHistory.unshift({...n,isOptimistic:!1})}},removeOptimisticEnrollment:(a,e)=>{var t;if(null==(t=a.data)?void 0:t.enrollmentHistory){let t=e.payload;a.data.enrollmentHistory=a.data.enrollmentHistory.filter(a=>a.id!==t)}},addOptimisticCancellation:(a,e)=>{if(a.data){let t={...e.payload,isOptimistic:!0};a.data.cancellationHistory.unshift(t)}},replaceOptimisticCancellation:(a,e)=>{var t;if(null==(t=a.data)?void 0:t.cancellationHistory){let{optimisticId:t,realCancellation:n}=e.payload,d=a.data.cancellationHistory.findIndex(a=>a.id===t);-1!==d&&(a.data.cancellationHistory[d]={...n,isOptimistic:!1})}},removeOptimisticCancellation:(a,e)=>{var t;if(null==(t=a.data)?void 0:t.cancellationHistory){let t=e.payload;a.data.cancellationHistory=a.data.cancellationHistory.filter(a=>a.id!==t)}},addOptimisticCalendarSession:(a,e)=>{if(a.data){let t={...e.payload,isOptimistic:!0};a.data.calendarSessions.push(t)}},replaceOptimisticCalendarSession:(a,e)=>{var t;if(null==(t=a.data)?void 0:t.calendarSessions){let{optimisticId:t,realSession:n}=e.payload,d=a.data.calendarSessions.findIndex(a=>a.id===t);-1!==d&&a.data.calendarSessions.splice(d,1);let l=a.data.calendarSessions.findIndex(a=>a.id===n.id);-1!==l&&a.data.calendarSessions.splice(l,1),a.data.calendarSessions.push({...n,isOptimistic:!1})}},removeOptimisticCalendarSession:(a,e)=>{var t;if(null==(t=a.data)?void 0:t.calendarSessions){let t=e.payload;a.data.calendarSessions=a.data.calendarSessions.filter(a=>a.id!==t)}},updateStudentEnrollmentFromSocket:(a,e)=>{var t,n;let{enrollmentId:d,sessionId:l}=e.payload;if(null==(t=a.data)?void 0:t.enrollmentHistory){let t=a.data.enrollmentHistory.findIndex(a=>a.id===d);if(-1!==t){let n=e.type.includes("accepted")?"CONFIRMED":"REJECTED";a.data.enrollmentHistory[t]={...a.data.enrollmentHistory[t],status:n}}}if((null==(n=a.data)?void 0:n.calendarSessions)&&l){let t=a.data.calendarSessions.findIndex(a=>a.id===l||a.classId===l);-1!==t&&(e.type.includes("accepted")?a.data.calendarSessions[t]={...a.data.calendarSessions[t],isAlreadyEnrolled:!0,studentEnrollmentStatus:"CONFIRMED"}:e.type.includes("rejected")&&a.data.calendarSessions.splice(t,1))}},updateStudentCancellationFromSocket:(a,e)=>{var t,n;let{refundId:d,sessionId:l}=e.payload;if(null==(t=a.data)?void 0:t.cancellationHistory){let t=a.data.cancellationHistory.findIndex(a=>a.id===d);if(-1!==t){let n=e.type.includes("accepted")?"APPROVED":"REJECTED";a.data.cancellationHistory[t]={...a.data.cancellationHistory[t],status:n}}}if(e.type.includes("accepted")&&(null==(n=a.data)?void 0:n.calendarSessions)&&l){let e=a.data.calendarSessions.findIndex(a=>a.id===l||a.classId===l);-1!==e&&a.data.calendarSessions.splice(e,1)}},updateSessionInfoFromSocket:(a,e)=>{var t;let{sessionId:n,updates:d}=e.payload;if(null==(t=a.data)?void 0:t.calendarSessions){let e=a.data.calendarSessions.findIndex(a=>a.id===n);-1!==e&&(a.data.calendarSessions[e]={...a.data.calendarSessions[e],...d})}},addNewSessionFromSocket:(a,e)=>{var t;let n=e.payload;(null==(t=a.data)?void 0:t.calendarSessions)&&-1===a.data.calendarSessions.findIndex(a=>a.id===n.id)&&a.data.calendarSessions.push(n)}}}),{setStudentData:d,setLoading:l,setError:i,clearError:s,updateStudentEnrollmentHistory:r,updateStudentCancellationHistory:o,clearStudentData:c,updateCalendarSession:u,removeCalendarSession:p,addOptimisticEnrollment:y,replaceOptimisticEnrollment:m,removeOptimisticEnrollment:S,addOptimisticCancellation:f,replaceOptimisticCancellation:E,removeOptimisticCancellation:H,addOptimisticCalendarSession:I,replaceOptimisticCalendarSession:v,removeOptimisticCalendarSession:A}=n.actions,R=n.reducer},9660:(a,e,t)=>{t.d(e,{qw:()=>p,Ay:()=>y,Nh:()=>o,r1:()=>r,f0:()=>s,W7:()=>c,$F:()=>u});var n=t(9267),d=function(a){return a.PERSONAL_SCHEDULE="PERSONAL_SCHEDULE",a.HEALTH_ISSUE="HEALTH_ISSUE",a.DISSATISFACTION="DISSATISFACTION",a.FINANCIAL_ISSUE="FINANCIAL_ISSUE",a.OTHER="OTHER",a}(d||{}),l=function(a){return a.PENDING="PENDING",a.APPROVED="APPROVED",a.REJECTED="REJECTED",a.PARTIAL_APPROVED="PARTIAL_APPROVED",a.CANCELLED="CANCELLED",a}({});let i=(0,n.Z0)({name:"principal",initialState:{data:{enrollments:[],refundRequests:[]},isLoading:!1,error:null},reducers:{setPrincipalData:(a,e)=>{a.data=e.payload},updatePrincipalEnrollment:(a,e)=>{var t;if((null==(t=a.data)?void 0:t.enrollments)&&Array.isArray(a.data.enrollments)){let t=a.data.enrollments.findIndex(a=>a.id===e.payload.id);-1!==t?a.data.enrollments[t]=e.payload:a.data.enrollments.push(e.payload)}},updatePrincipalRefundRequest:(a,e)=>{var t;if((null==(t=a.data)?void 0:t.refundRequests)&&Array.isArray(a.data.refundRequests)){let t=a.data.refundRequests.findIndex(a=>a.id===e.payload.id);-1!==t?a.data.refundRequests[t]=e.payload:a.data.refundRequests.push(e.payload)}},updatePrincipalEnrollmentFromSocket:(a,e)=>{var t;let{enrollmentId:n,studentId:d,sessionId:i,timestamp:s}=e.payload;if((null==(t=a.data)?void 0:t.enrollments)&&Array.isArray(a.data.enrollments)){let e={id:n,studentId:d,sessionId:i,status:l.PENDING,enrolledAt:s,session:{id:i,date:"",startTime:"",endTime:"",class:{id:0,className:"",teacher:{name:""}}},student:{id:d,name:""}};-1===a.data.enrollments.findIndex(a=>a.id===n)&&a.data.enrollments.unshift(e)}},updatePrincipalRefundRequestFromSocket:(a,e)=>{var t;let{refundId:n,studentId:d,sessionId:i,timestamp:s}=e.payload;if((null==(t=a.data)?void 0:t.refundRequests)&&Array.isArray(a.data.refundRequests)){let e={id:n,sessionEnrollmentId:0,studentId:d,reason:"",refundAmount:0,status:l.PENDING,requestedAt:s,sessionEnrollment:{session:{id:i,date:"",startTime:"",endTime:"",class:{id:0,className:"",level:"BEGINNER",teacher:{name:""}}},date:"",startTime:"",endTime:""},student:{id:d,name:""}};-1===a.data.refundRequests.findIndex(a=>a.id===n)&&a.data.refundRequests.unshift(e)}},setLoading:(a,e)=>{a.isLoading=e.payload},setError:(a,e)=>{a.error=e.payload},clearPrincipalData:a=>{a.data={enrollments:[],refundRequests:[]},a.isLoading=!1,a.error=null}}}),{setPrincipalData:s,setLoading:r,setError:o,updatePrincipalEnrollment:c,updatePrincipalRefundRequest:u,clearPrincipalData:p}=i.actions,y=i.reducer}}]);