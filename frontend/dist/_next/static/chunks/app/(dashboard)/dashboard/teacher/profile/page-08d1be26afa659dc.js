(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[174],{821:(e,l,a)=>{"use strict";a.d(l,{D9:()=>r,Ef:()=>u,KG:()=>s,Mu:()=>i,P_:()=>n,U_:()=>c,Yi:()=>o,mZ:()=>f,np:()=>m,oB:()=>d});var t=a(2313);let s=()=>(0,t.Jt)("/teachers/me"),n=e=>(0,t.yJ)("/teachers/me/profile",e),r=e=>{let l=new FormData;return l.append("photo",e),(0,t.yJ)("/teachers/me/profile/photo",l,{headers:{"Content-Type":"multipart/form-data"}})},u=()=>(0,t.Jt)("/teachers/me/classes-with-sessions"),i=(e,l)=>(0,t.yJ)("/classes/".concat(e,"/details"),l),c=e=>(0,t.Jt)("/class-sessions/".concat(e,"/enrollments")),o=(e,l)=>(0,t.yJ)("/class-sessions/enrollments/".concat(e,"/status"),l),d=e=>(0,t.bE)("/teachers/me/request-join-academy",e),m=()=>(0,t.Jt)("/teachers/me/academy"),f=()=>(0,t.bE)("/teachers/me/leave-academy")},2371:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>m});var t=a(5155),s=a(2115),n=a(498),r=a(4582),u=a(3717),i=a(6344),c=a(606),o=a(9071),d=a(6983);function m(){var e;let[l,a]=s.useState(!1),{navigation:m}=(0,i.nm)(),{navigateToSubPage:f}=m,{data:h,status:v}=(0,r.wV)(),{profile:y,loadProfile:p,isLoading:x,error:g}=(0,d.g)();s.useEffect(()=>{p()},[p]);let{logout:b}=(0,c.W)(),w=async()=>{await b()};return"loading"===v||x?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-full",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-stone-700"})}):g?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-full",children:[(0,t.jsx)("p",{className:"text-red-500",children:"데이터를 불러오는데 실패했습니다."}),(0,t.jsx)("button",{onClick:()=>p(),className:"mt-4 px-4 py-2 bg-stone-700 text-white rounded-lg hover:bg-stone-800",children:"다시 시도"})]}):(0,t.jsxs)("div",{className:"flex overflow-hidden flex-col pb-2 mx-auto w-full bg-white max-w-[480px] relative",children:[(0,t.jsx)("div",{className:"flex flex-col px-5 py-6",children:(0,t.jsxs)("h1",{className:"text-2xl font-bold text-stone-700",children:[(null==y?void 0:y.name)||(null==h||null==(e=h.user)?void 0:e.name),"님의 정보"]})}),(0,t.jsx)(n.$,{links:[{label:"내 프로필 관리",icon:"/icons/group.svg",onClick:()=>{f("profile")}},{label:"개인 정보",icon:"/icons/group.svg",onClick:()=>{f("personal-info")}},{label:"내 학원 관리",icon:"/icons/group.svg",onClick:()=>{f("academy-management")}}]}),(0,t.jsx)("div",{className:"flex flex-col px-5 py-10 mt-auto",children:(0,t.jsx)("button",{onClick:()=>a(!0),className:"mt-6 w-full py-4 text-base font-semibold text-neutral-400 rounded-lg border border-zinc-300",children:"로그아웃"})}),(0,t.jsx)(o.A,{}),l&&(0,t.jsx)(u.K,{onLogout:w,onClose:()=>a(!1)})]})}},5e3:(e,l,a)=>{Promise.resolve().then(a.bind(a,2371))},6983:(e,l,a)=>{"use strict";a.d(l,{g:()=>u});var t=a(2115),s=a(4582),n=a(821),r=a(6334);function u(){var e;let{data:l,status:a}=(0,s.wV)(),{}=(0,r.C)(),[u,i]=(0,t.useState)(null),[c,o]=(0,t.useState)(null),[d,m]=(0,t.useState)([]),[f,h]=(0,t.useState)([]),[v,y]=(0,t.useState)(!1),[p,x]=(0,t.useState)(null),g="authenticated"===a&&(null==l||null==(e=l.user)?void 0:e.role)==="TEACHER",b=(0,t.useCallback)(async()=>{if(g)try{x(null);let e=await (0,n.KG)();i(e.data||null)}catch(a){var e,l;x((null==(l=a.response)||null==(e=l.data)?void 0:e.message)||"프로필 로드 실패")}},[g]),w=(0,t.useCallback)(async()=>{if(g)try{x(null);let e=await (0,n.np)();o(e.data||null)}catch(a){var e,l;x((null==(l=a.response)||null==(e=l.data)?void 0:e.message)||"학원 정보 로드 실패")}},[g]),C=(0,t.useCallback)(async()=>{if(g)try{x(null);let e=(await (0,n.Ef)()).data;e&&(m(e.classes||[]),h(e.sessions||[]))}catch(a){var e,l;x((null==(l=a.response)||null==(e=l.data)?void 0:e.message)||"클래스 및 세션 목록 로드 실패")}},[g]),k=(0,t.useCallback)(async e=>{if(!g||!e)return null;try{return x(null),(await (0,n.U_)(e)).data}catch(e){var l,a;return x((null==(a=e.response)||null==(l=a.data)?void 0:l.message)||"수강생 목록 로드 실패"),null}},[g]),j=(0,t.useCallback)(async(e,l)=>{if(!g)return null;try{return x(null),(await (0,n.Yi)(e,l)).data}catch(e){var a,t;return x((null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"수강생 상태 업데이트 실패"),null}},[g]),S=(0,t.useCallback)(async e=>{if(!g)return null;try{x(null);let l=await (0,n.P_)(e);return await b(),l.data}catch(e){var l,a;return x((null==(a=e.response)||null==(l=a.data)?void 0:l.message)||"프로필 업데이트 실패"),null}},[g,b]),N=(0,t.useCallback)(async e=>{if(!g)return null;try{return x(null),(await (0,n.D9)(e)).data}catch(e){var l,a;return x((null==(a=e.response)||null==(l=a.data)?void 0:l.message)||"프로필 사진 업데이트 실패"),null}},[g]),E=(0,t.useCallback)(async(e,l)=>{if(!g)return null;try{return x(null),(await (0,n.Mu)(e,l)).data}catch(e){var a,t;return x((null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"클래스 정보 업데이트 실패"),null}},[g]),_=async()=>{if(g)try{y(!0),x(null),await Promise.all([b(),w(),C()])}catch(a){var e,l;x((null==(l=a.response)||null==(e=l.data)?void 0:e.message)||"데이터 로드 실패")}finally{y(!1)}},D=(0,t.useCallback)(async e=>{try{if(x(null),!e)return null;if(u&&u.id===e)return u;return(await (0,n.KG)()).data}catch(e){var l,a;return x((null==(a=e.response)||null==(l=a.data)?void 0:l.message)||"프로필 로드 실패"),null}},[u]);return{profile:u,academy:c,classes:d,sessions:f,isLoading:v,error:p,isTeacher:g,loadProfile:b,loadAcademy:w,loadClasses:C,loadSessions:C,loadAllData:_,loadSessionEnrollments:k,updateEnrollmentStatus:j,updateProfile:S,updateProfilePhoto:N,updateClassDetails:E,loadProfileById:D,getClassById:e=>d.find(l=>l.id===e),getSessionById:e=>f.find(l=>l.id===e),getSessionsByClassId:e=>f.filter(l=>l.class.id===e),getSessionsByDate:e=>f.filter(l=>new Date(l.date).toDateString()===e.toDateString()),getTeacherById:e=>u}}}},e=>{e.O(0,[5125,8720,5239,1213,9267,176,4575,6344,6334,3140,6291,8441,1255,7358],()=>e(e.s=5e3)),_N_E=e.O()}]);