(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{3673:()=>{},4833:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3673,23)),Promise.resolve().then(r.bind(r,8204))},8204:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var a=r(5155),n=r(4582),o=r(4852),i=r(9776),s=r(1213),l=r(9267);let d={user:null,isLoading:!1,error:null,lastUpdated:null},c=(0,l.Z0)({name:"common",initialState:d,reducers:{setUser:(e,t)=>{e.user=t.payload},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},setLastUpdated:(e,t)=>{e.lastUpdated=t.payload},clearCommonData:()=>d}}),{}=c.actions,u=c.reducer;var p=r(9660),m=r(2101);let f=(0,l.Z0)({name:"ui",initialState:{globalLoading:!1,modals:{},notifications:[],sidebarOpen:!1,theme:"light"},reducers:{setGlobalLoading:(e,t)=>{e.globalLoading=t.payload},setModalOpen:(e,t)=>{let{modalId:r,isOpen:a}=t.payload;e.modals[r]=a},addNotification:(e,t)=>{e.notifications.push({id:Date.now().toString(),timestamp:Date.now(),...t.payload})},removeNotification:(e,t)=>{e.notifications=e.notifications.filter(e=>e.id!==t.payload)},clearNotifications:e=>{e.notifications=[]},setSidebarOpen:(e,t)=>{e.sidebarOpen=t.payload},setTheme:(e,t)=>{e.theme=t.payload}}}),{}=f.actions,h=f.reducer,v=(0,l.U1)({reducer:{common:u,principal:p.Ay,student:m.Ay,ui:h},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST"]}})});var w=r(8720),y=r(6344),g=r(2115),b=r(4575);function E(e){let{children:t}=e,{data:r}=(0,n.wV)();return(()=>{let{data:e,update:t}=(0,n.wV)(),r=(0,g.useRef)(Date.now()),a=(0,g.useRef)(null),o=(0,g.useCallback)(()=>{r.current=Date.now(),a.current&&clearTimeout(a.current),a.current=setTimeout(async()=>{if(null==e?void 0:e.accessToken)try{let r=await (0,b.Be)({userId:e.user.id});r.data&&await t({accessToken:r.data.access_token,expiresAt:Date.now()+1e3*r.data.expires_in,error:void 0})}catch(e){}},36e5)},[e,t]);return(0,g.useEffect)(()=>{if(!(null==e?void 0:e.user))return;let t=["mousedown","mousemove","keypress","scroll","touchstart","click"],r=()=>{o()};return t.forEach(e=>{document.addEventListener(e,r,!0)}),o(),()=>{t.forEach(e=>{document.removeEventListener(e,r,!0)}),a.current&&clearTimeout(a.current)}},[o,null==e?void 0:e.user]),(0,g.useEffect)(()=>{if(!(null==e?void 0:e.user))return;let t=setInterval(()=>{Date.now()-r.current>12096e5&&(window.location.href="/auth")},36e5);return()=>{clearInterval(t)}},[null==e?void 0:e.user]),r.current})(),(0,a.jsx)(a.Fragment,{children:t})}let k=new o.E;function x(e){let{children:t}=e;return(0,a.jsx)(s.Kq,{store:v,children:(0,a.jsx)(n.CP,{children:(0,a.jsx)(i.Ht,{client:k,children:(0,a.jsx)(y.Dv,{children:(0,a.jsxs)(E,{children:[t,(0,a.jsx)(w.l$,{position:"top-right"})]})})})})})}}},e=>{e.O(0,[2978,5125,8720,1213,9267,6743,4852,4575,6344,3140,8441,1255,7358],()=>e(e.s=4833)),_N_E=e.O()}]);