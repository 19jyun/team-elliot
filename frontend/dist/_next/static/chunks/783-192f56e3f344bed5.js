"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[783],{76:(e,s,t)=>{t.d(s,{V:()=>l});var a=t(2466);let l=e=>{if(!e)return null;if(e.startsWith("http://")||e.startsWith("https://"))return e;let s=a.A.defaults.baseURL||"http://localhost:3001";return"".concat(s).concat(e)}},576:(e,s,t)=>{t.d(s,{es:()=>a,jN:()=>l,t7:()=>n});let a={primary:"[#ac9592]",secondary:"[#9a8582]",light:"[#ac9592]",border:"[#9a8582]",hover:"[#8a7572]"},l={BEGINNER:"#F4E7E7",INTERMEDIATE:"#FBF4D8",ADVANCED:"#CBDFE3"},n={BEGINNER:"비기너",INTERMEDIATE:"초급",ADVANCED:"고급"}},783:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var a=t(5155),l=t(4582),n=t(2115),r=t(1213),i=t(6852),c=t(1785),o=t(4522),d=t(5614),m=t(6344),u=t(964);function f(){var e;let{data:s,status:t}=(0,l.wV)(),{navigation:f}=(0,m.nm)(),{navigateToSubPage:h}=f,x=(0,r.d4)(e=>e.student.data),p=(null==x?void 0:x.calendarSessions)||[],N=(null==x?void 0:x.calendarRange)||null,y=p.filter(e=>e.date).map(e=>{var s,t,a,l,n,r,i,c;return(0,u.Em)({id:e.id,date:e.date,startTime:e.startTime,endTime:e.endTime,className:(null==(s=e.class)?void 0:s.className)||"클래스명 없음",teacherName:(null==(a=e.class)||null==(t=a.teacher)?void 0:t.name)||"선생님 정보 없음",level:(null==(l=e.class)?void 0:l.level)||"BEGINNER",classId:(null==(n=e.class)?void 0:n.id)||0,teacherId:(null==(i=e.class)||null==(r=i.teacher)?void 0:r.id)||0,maxStudents:e.maxStudents||0,currentEnrollments:e.currentStudents||0,tuitionFee:parseInt((null==(c=e.class)?void 0:c.tuitionFee)||"50000"),isEnrolled:e.isAlreadyEnrolled||!1,enrollmentId:void 0,enrollmentStatus:e.studentEnrollmentStatus||void 0})}),v=N?(0,u.BP)(N):void 0,[b,g]=(0,n.useState)(null),[j,E]=(0,n.useState)(!1),[w,T]=(0,n.useState)(null),[D,S]=(0,n.useState)(!1);return"loading"===t?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-full",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-stone-700"})}):(0,a.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,a.jsxs)("header",{className:"flex-shrink-0",children:[(0,a.jsx)("div",{className:"flex flex-col px-5 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-stone-700",children:["안녕하세요, ",null==s||null==(e=s.user)?void 0:e.name,"님!"]}),(0,a.jsx)("p",{className:"mt-2 text-stone-500",children:"오늘도 즐거운 학습되세요!"})]}),(0,a.jsx)("button",{onClick:()=>{h("enrolled-classes")},className:"flex items-center justify-center w-12 h-12 bg-stone-100 rounded-full hover:bg-stone-200 transition-colors","aria-label":"수강중인 클래스 보기",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-stone-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})}),(0,a.jsx)("div",{className:"flex flex-col w-full bg-white text-stone-700",style:{height:"calc(100vh - 450px)"},children:(0,a.jsx)(i.S,{mode:"student-view",sessions:y,selectedSessionIds:new Set,onSessionSelect:()=>{},onDateClick:e=>{g(new Date(e)),E(!0)},calendarRange:v,children:(0,a.jsx)(c.q,{})})})]}),(0,a.jsx)(o.A,{isOpen:j,selectedDate:b,onClose:()=>{E(!1),g(null)},onSessionClick:e=>{T(e),S(!0)},role:"student"}),(0,a.jsx)(d.M,{isOpen:D,session:w?{session_id:w.id,date:w.date,startTime:w.startTime,endTime:w.endTime,enrollment_status:w.studentEnrollmentStatus||"CONFIRMED",class:w.class?{id:w.class.id,className:w.class.className,level:w.class.level}:{id:0,className:"클래스명 없음",level:"BEGINNER"}}:null,onClose:()=>{S(!1),T(null),E(!1),g(null)},onlyDetail:!1})]})}},964:(e,s,t)=>{t.d(s,{A8:()=>o,BP:()=>u,E9:()=>y,Em:()=>n,GA:()=>E,Lj:()=>j,QH:()=>N,S1:()=>D,aD:()=>x,cG:()=>h,dO:()=>r,g8:()=>g,nH:()=>m,tN:()=>i,wh:()=>v,xb:()=>w});var a=t(9627),l=t(4723);function n(e){let s=e.currentEnrollments>=e.maxStudents,t=new Date(e.date+" "+e.startTime)<new Date,a="blue";return t?a="gray":e.isEnrolled?a="green":s&&(a="red"),{id:e.id,title:"".concat(e.className," (").concat(e.teacherName,")"),date:e.date,startTime:e.startTime,endTime:e.endTime,timeDisplay:(0,l.sH)(e.startTime,e.endTime),isFull:s,isEnrolled:e.isEnrolled,canEnroll:!e.isEnrolled&&!s&&!t,statusColor:a,capacityText:"".concat(e.currentEnrollments,"/").concat(e.maxStudents,"명"),class:{id:e.classId||0,className:e.className,level:e.level||"BEGINNER",tuitionFee:e.tuitionFee.toString(),teacher:{id:e.teacherId||0,name:e.teacherName}}}}function r(e){return{id:e.id,className:e.name,dayOfWeek:(0,l.Lv)(e.dayOfWeek),startTime:e.startTime,teacher:{id:0,name:e.teacherName}}}function i(e){let s=new Map;return e.forEach(e=>{let t=e.className;s.has(t)||s.set(t,{id:e.id,name:e.className,level:"BEGINNER",tuitionFee:e.tuitionFee,teacherName:e.teacherName,dayOfWeek:"MONDAY",startTime:e.startTime,endTime:e.endTime,location:"온라인",sessions:[]}),s.get(t).sessions.push({session_id:e.id,enrollment_id:e.enrollmentId,date:e.date,startTime:e.startTime,endTime:e.endTime,enrollment_status:e.enrollmentStatus||(e.isEnrolled?"CONFIRMED":"PENDING"),class:{id:e.id,className:e.className,level:"BEGINNER"}})}),Array.from(s.values())}function c(e){return{id:e.id,status:e.status,className:e.className,sessionDate:e.sessionDate,cancelledAt:e.cancelledAt||e.requestedAt,reason:e.reason,sessionId:e.sessionId,refundAmount:e.refundAmount,requestedAt:e.requestedAt,rejectionDetail:e.rejectionDetail,isOptimistic:e.isOptimistic}}function o(e){return e.map(c)}function d(e){return{id:e.id,sessionId:e.sessionId,status:e.status,enrolledAt:e.enrolledAt,description:e.description,session:e.session,enrollmentRejection:e.enrollmentRejection,refundRejection:e.refundRejection,isOptimistic:e.isOptimistic}}function m(e){return e.map(d)}function u(e){return{startDate:new Date(e.startDate),endDate:new Date(e.endDate)}}let f={BEGINNER:"#F4E7E7",INTERMEDIATE:"#FBF4D8",ADVANCED:"#CBDFE3"};function h(e,s){if(!e||0===e.length)return[];let t=new Map;return e.forEach(e=>{if(!e.class)return;let a=e.class.className;if(!t.has(a)){var l;let n=e.class.level||"BEGINNER",r=f[n]||f.BEGINNER;t.set(a,{id:e.class.id,className:e.class.className,level:n,tuitionFee:e.class.tuitionFee,teacher:{name:(null==(l=e.class.teacher)?void 0:l.name)||"선생님"},dayOfWeek:"MONDAY",startTime:e.startTime,endTime:e.endTime,backgroundColor:r,sessionCount:0,academyId:s,availableSessions:[]})}let n=t.get(a);n.availableSessions.push({id:e.id,date:e.date,startTime:e.startTime,endTime:e.endTime}),n.sessionCount=n.availableSessions.length}),Array.from(t.values())}function x(e,s,t){return e?{id:e.id,name:e.name,photoUrl:e.photoUrl,phoneNumber:e.phoneNumber,introduction:e.introduction,yearsOfExperience:e.yearsOfExperience,education:e.education,specialties:e.specialties,displayName:e.name||"이름 없음",displayPhotoUrl:e.photoUrl||"",displayPhoneNumber:e.phoneNumber||"",displayIntroduction:e.introduction||"",displayYearsOfExperience:e.yearsOfExperience?"".concat(e.yearsOfExperience,"년"):"",hasEducation:!!(e.education&&e.education.length>0),hasSpecialties:!!(e.specialties&&e.specialties.length>0),isLoading:s,error:t}:{id:0,name:"",displayName:"",displayPhotoUrl:"",displayPhoneNumber:"",displayIntroduction:"",displayYearsOfExperience:"",hasEducation:!1,hasSpecialties:!1,isLoading:s,error:t}}function p(e){return{id:e.id,pose:{id:e.pose.id,name:e.pose.name,description:e.pose.description,imageUrl:e.pose.imageUrl,difficulty:e.pose.difficulty,displayDifficulty:(0,a.Vq)(e.pose.difficulty),difficultyColor:(0,a.J8)(e.pose.difficulty)},notes:e.notes,hasNotes:!!e.notes,hasImage:!!e.pose.imageUrl}}function N(e,s,t,a){return{sessionId:e,contents:(null==s?void 0:s.map(p))||[],isLoading:t,error:a,hasContents:!!(s&&s.length>0)}}function y(e,s,t,a){var n;let r=!(arguments.length>4)||void 0===arguments[4]||arguments[4];return s?{classId:e,className:s.className||"",dayOfWeek:(0,l.Lv)(s.dayOfWeek||""),startTime:s.startTime||"",endTime:s.endTime||"",description:(null==(n=s.classDetail)?void 0:n.description)||s.description||"클래스 설명이 없습니다.",teacher:s.teacher?{id:s.teacherId||0,name:s.teacher.name||""}:null,hasTeacher:!!s.teacher,showModificationButton:r,isLoading:t,error:a}:{classId:e,className:"",dayOfWeek:"",startTime:"",endTime:"",description:"",teacher:null,hasTeacher:!1,showModificationButton:r,isLoading:t,error:a}}function v(e){return{id:e.id,userId:0,name:e.name,phoneNumber:e.phoneNumber,introduction:e.introduction,education:e.education,specialties:e.specialties,certifications:[],yearsOfExperience:e.yearsOfExperience,availableTimes:[],photoUrl:e.photoUrl,academyId:void 0,academy:null,createdAt:e.createdAt,updatedAt:e.updatedAt}}let b=e=>!!e&&"object"==typeof e&&"number"==typeof e.id&&"number"==typeof e.sessionId&&"string"==typeof e.date&&"string"==typeof e.startTime&&"string"==typeof e.endTime&&null!==e.class&&"object"==typeof e.class&&"number"==typeof e.class.id&&"string"==typeof e.class.className,g=e=>e.filter(b),j=e=>e.map(e=>[e].map(e=>({id:e.sessionId,sessionId:e.sessionId,date:e.date,startTime:e.startTime,endTime:e.endTime,isEnrollable:e.isEnrollable,isAlreadyEnrolled:e.isAlreadyEnrolled,class:{id:e.class.id,className:e.class.className,level:e.class.level,tuitionFee:e.class.tuitionFee,teacher:{id:e.class.teacher.id,name:e.class.teacher.name}},academy:e.class.academy?{id:e.class.academy.id,name:e.class.academy.name}:void 0}))[0]).filter(b),E=e=>e.map(e=>e.id),w=e=>!!e&&"object"==typeof e&&Array.isArray(e.cancellations)&&e.cancellations.every(e=>"number"==typeof e)&&Array.isArray(e.newEnrollments)&&e.newEnrollments.every(e=>"number"==typeof e)&&(void 0===e.reason||"string"==typeof e.reason),T=e=>!!e&&"object"==typeof e&&"number"==typeof e.id&&"string"==typeof e.date&&"string"==typeof e.startTime&&"string"==typeof e.endTime&&null!==e.class&&"object"==typeof e.class&&"number"==typeof e.class.id&&"string"==typeof e.class.className,D=e=>e.filter(T)},1538:(e,s,t)=>{t.d(s,{K:()=>g});var a=t(5155),l=t(2115),n=t(8720),r=t(5203),i=t.n(r),c=t(6344),o=t(6948),d=t(5897),m=t(1647),u=t(508),f=t(9364),h=t(9442),x=t(2472),p=t(76),N=t(9238),y=t(964);function v(e){var s,t,n;let{teacherId:r}=e,{getTeacherProfileForStudent:i}=(0,N.l)(),[c,v]=(0,l.useState)(null),[b,g]=(0,l.useState)(!1),[j,E]=(0,l.useState)(null),w=(0,y.aD)(c,b,j);return((0,l.useEffect)(()=>{let e=!0;return(async()=>{try{g(!0),E(null);let s=await i(r);if(e&&s){let e=(0,y.wh)(s);v(e)}}catch(s){e&&E(s&&"object"==typeof s&&"response"in s&&s.response&&"object"==typeof s.response&&"data"in s.response&&s.response.data&&"object"==typeof s.response.data&&"message"in s.response.data?String(s.response.data.message):"선생님 정보를 불러오지 못했습니다.")}finally{e&&g(!1)}})(),()=>{e=!1}},[r,i]),w.isLoading)?(0,a.jsx)("div",{className:"flex items-center justify-center py-6",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-stone-700"})}):w.error||!c?(0,a.jsx)(o.Zp,{className:"w-full",children:(0,a.jsx)(o.Wu,{className:"p-4 text-center text-stone-500",children:"선생님 정보를 불러올 수 없습니다."})}):(0,a.jsx)(o.Zp,{className:"w-full",children:(0,a.jsxs)(o.Wu,{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)(d.eu,{className:"h-16 w-16",children:[(0,a.jsx)(d.BK,{src:(0,p.V)(w.displayPhotoUrl)||"",alt:w.displayName}),(0,a.jsx)(d.q5,{className:"text-lg",children:null==(s=w.displayName)?void 0:s.charAt(0)})]})}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:w.displayName}),w.displayPhoneNumber&&(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:w.displayPhoneNumber})]})]}),w.displayIntroduction&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"font-medium flex items-center gap-2 text-sm",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"})," 소개"]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm whitespace-pre-line",children:w.displayIntroduction})]}),w.displayYearsOfExperience&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"font-medium flex items-center gap-2 text-sm",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"})," 교습 경력"]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm",children:w.displayYearsOfExperience})]}),w.hasEducation&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"font-medium flex items-center gap-2 text-sm",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"})," 학력/경력"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:null==(t=w.education)?void 0:t.map((e,s)=>(0,a.jsx)(m.E,{variant:"secondary",className:"text-xs",children:e},s))})]}),w.hasSpecialties&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"font-medium flex items-center gap-2 text-sm",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"})," 전문 분야"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:null==(n=w.specialties)?void 0:n.map((e,s)=>(0,a.jsx)(m.E,{variant:"outline",className:"text-xs",children:e},s))})]})]})})}var b=t(4723);function g(e){let{classId:s,classSessions:t,showModificationButton:r=!0,onModificationClick:o}=e,[d,m]=(0,l.useState)(null),[u,f]=(0,l.useState)(!1),[h,x]=(0,l.useState)(null),{navigation:p}=(0,c.nm)(),{navigateToSubPage:g}=p,{getClassDetails:j}=(0,N.l)(),E=(0,y.E9)(s,d,u,h,r),w=(0,l.useCallback)(async()=>{try{f(!0),x(null);let e=await j(s);m(e||null)}catch(e){x("클래스 정보를 불러오는데 실패했습니다."),n.oR.error("클래스 정보를 불러오는데 실패했습니다.")}finally{f(!1)}},[s,j]);return((0,l.useEffect)(()=>{s&&w()},[s,w]),(0,l.useEffect)(()=>{null==d||d.teacher},[null==d?void 0:d.teacher]),E.isLoading)?(0,a.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-stone-700"})}):E.error||!d?(0,a.jsx)("div",{className:"flex items-center justify-center h-32 text-stone-500",children:E.error||"클래스 정보를 불러올 수 없습니다."}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-[20px] font-semibold text-[#262626] leading-[130%]",children:E.className}),(0,a.jsxs)("div",{className:"text-base text-[#262626]",children:[E.dayOfWeek," ",(0,b.fU)(E.startTime)," - ",(0,b.fU)(E.endTime)]}),(0,a.jsx)("div",{className:"border-b border-gray-200"}),(0,a.jsx)("div",{className:"text-base text-[#262626] whitespace-pre-line",children:E.description}),E.hasTeacher&&E.teacher&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(v,{teacherId:E.teacher.id})}),E.showModificationButton&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{onClick:()=>{let e=null;if(t&&t.length>0){let s=t.filter(e=>"CONFIRMED"===e.enrollment_status||"PENDING"===e.enrollment_status||"REFUND_REJECTED_CONFIRMED"===e.enrollment_status);if(s.length>0){let t=s.map(e=>new Date(e.date)).map(e=>e.getMonth()+1);e=[...new Set(t)].map(e=>({month:e,count:t.filter(s=>s===e).length})).reduce((e,s)=>e.count>s.count?e:s).month}}if(!e){let s=new Date,a=(null==t?void 0:t.filter(e=>new Date(e.date)>s))||[];e=a.length>0?new Date(a.reduce((e,s)=>{let t=new Date(e.date);return new Date(s.date)<t?s:e}).date).getMonth()+1:s.getMonth()+1}let a="modify-".concat(s,"-").concat(e);o&&o(),g(a)},className:i()("w-full px-2.5 py-4 rounded-lg text-base font-semibold leading-snug text-white","bg-[#AC9592] hover:bg-[#8c7a74] transition-colors"),children:"수강 변경/취소"})})]})}},1647:(e,s,t)=>{t.d(s,{E:()=>i});var a=t(5155);t(2115);var l=t(3101),n=t(4269);let r=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)(r({variant:t}),s),...l})}},2336:(e,s,t)=>{t.d(s,{Cn:()=>x,H7:()=>f,Ii:()=>N,KG:()=>r,L6:()=>h,PB:()=>c,X7:()=>m,cs:()=>i,dk:()=>d,mK:()=>o,mZ:()=>u,qx:()=>n,vs:()=>p,x1:()=>l});var a=t(2313);let l=()=>(0,a.Jt)("/student/classes"),n=()=>(0,a.Jt)("/student/profile"),r=e=>(0,a.Jt)("/student/teachers/".concat(e,"/profile")),i=e=>(0,a.yJ)("/student/profile",e),c=()=>(0,a.Jt)("/student/enrollment-history"),o=()=>(0,a.Jt)("/student/cancellation-history"),d=e=>(0,a.Jt)("/student/sessions/".concat(e,"/payment-info")),m=e=>(0,a.bE)("/academy/join",e),u=e=>(0,a.bE)("/academy/leave",e),f=()=>(0,a.Jt)("/academy/my/list"),h=e=>(0,a.Jt)("/class-sessions/student/available-enrollment?academyId=".concat(e)),x=e=>(0,a.bE)("/class-sessions/batch-enroll",e),p=e=>(0,a.Jt)("/class-sessions/class/".concat(e,"/modification")),N=e=>(0,a.bE)("/class-sessions/batch-modify",e)},4269:(e,s,t)=>{t.d(s,{cn:()=>n});var a=t(2821),l=t(5889);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.QP)((0,a.$)(s))}},5614:(e,s,t)=>{t.d(s,{M:()=>x});var a=t(5155),l=t(2115),n=t(7733),r=t(3342),i=t(1538),c=t(5239),o=t(9382),d=t(964);function m(e){let{content:s,index:t}=e;return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"flex items-center justify-center w-8 h-8 bg-[#ac9592] text-white rounded-full text-sm font-bold",children:t+1}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-stone-700",children:s.pose.name})]}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(s.pose.difficultyColor),children:s.pose.displayDifficulty})]}),s.hasImage&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)("div",{className:"relative w-full h-48 bg-gray-100 rounded-lg overflow-hidden",children:(0,a.jsx)(c.default,{src:s.pose.imageUrl,alt:s.pose.name,fill:!0,className:"object-cover"})})}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-stone-600 mb-2",children:"자세 설명"}),(0,a.jsx)("p",{className:"text-sm text-stone-700 leading-relaxed whitespace-pre-line",children:s.pose.description})]}),s.hasNotes&&(0,a.jsxs)("div",{className:"bg-stone-50 rounded-lg p-3 border-l-4 border-[#ac9592]",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-stone-600 mb-1",children:"강사 노트"}),(0,a.jsx)("p",{className:"text-sm text-stone-700 leading-relaxed whitespace-pre-line",children:s.notes})]})]})}function u(e){let{sessionId:s}=e,{data:t,isLoading:l,error:n}=(0,o.OD)(s),r=(0,d.QH)(s,t,l,(null==n?void 0:n.message)||null);return r.isLoading?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-stone-700"})}):r.error?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"text-red-500 text-lg mb-2",children:"⚠️"}),(0,a.jsx)("p",{className:"text-stone-500 text-center",children:"수업 내용을 불러오는데 실패했습니다."}),(0,a.jsx)("p",{className:"text-sm text-stone-400 mt-1",children:"잠시 후 다시 시도해주세요."})]}):r.hasContents?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-stone-700 mb-2",children:"이번 수업에서 배울 자세들"}),(0,a.jsxs)("p",{className:"text-sm text-stone-500",children:["총 ",r.contents.length,"개의 발레 자세를 순서대로 배워볼 예정입니다."]})]}),(0,a.jsx)("div",{className:"space-y-4",children:r.contents.map((e,s)=>(0,a.jsx)(m,{content:e,index:s},e.id))}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-stone-50 rounded-lg border border-stone-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"text-[#ac9592] mt-0.5",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-stone-700 mb-1",children:"수업 준비 안내"}),(0,a.jsx)("p",{className:"text-sm text-stone-600 leading-relaxed",children:"각 자세의 설명을 미리 읽어보시고, 강사님의 노트를 참고하여 수업에 임해주세요. 난이도에 따라 체력과 집중력이 필요할 수 있으니 충분한 휴식을 취하시기 바랍니다."})]})]})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,a.jsx)(c.default,{src:"/images/logo/team-eliot-2.png",alt:"수업 내용 없음",width:120,height:120,className:"opacity-50"}),(0,a.jsx)("p",{className:"mt-4 text-stone-500 text-center",children:"아직 설정된 발레 자세가 없습니다."}),(0,a.jsx)("p",{className:"text-sm text-stone-400 mt-1 text-center",children:"강사님이 수업 내용을 설정하면 여기에 표시됩니다."})]})}var f=t(9238),h=t(576);function x(e){var s;let{isOpen:t,session:c,onClose:o,onlyDetail:d=!1}=e,{isLoading:m}=(0,f.l)(),[x,p]=(0,l.useState)(null),[N,y]=(0,l.useState)("class"),v=(null==c?void 0:c.session_id)||0;(0,l.useEffect)(()=>{t&&(null==c?void 0:c.class)?p(c.class):(p(null),y("class"))},[t,null==c?void 0:c.class]),(0,l.useEffect)(()=>{d&&y("session")},[d]);let b=d?[{label:"수업 내용",value:"session"}]:[{label:"클래스 정보",value:"class"},{label:"수업 내용",value:"session"}];return c?(0,a.jsxs)(r.g,{isOpen:t,onClose:o,title:"".concat(c.class.className," - ").concat(("string"==typeof(s=c.startTime)?new Date(s):s).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})),contentClassName:"pb-6",children:[!d&&(0,a.jsx)("div",{className:"flex border-b border-stone-200 mb-4",children:b.map(e=>(0,a.jsx)("button",{onClick:()=>y(e.value),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors duration-200 ".concat(N===e.value?"text-".concat(h.es.primary," border-b-2 border-").concat(h.es.primary):"text-".concat(h.es.secondary," hover:text-").concat(h.es.hover)),children:e.label},e.value))}),(0,a.jsx)("div",{className:"flex flex-col overflow-hidden",style:{height:d?"600px":"500px"},children:d?(0,a.jsx)("div",{className:"h-full overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:(0,a.jsx)(u,{sessionId:v})}):(0,a.jsxs)(n.P.div,{className:"flex w-full h-full",style:{width:"200%"},animate:{x:-(50*(d?0:b.findIndex(e=>e.value===N)))+"%"},transition:{type:"tween",duration:.3,ease:"easeInOut"},children:[(0,a.jsx)("div",{className:"w-1/2 flex-shrink-0 px-1",children:(0,a.jsx)("div",{className:"h-full overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:m?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-stone-700"})}):x?(0,a.jsx)(i.K,{classId:c.class.id,classSessions:[c],showModificationButton:!0,onModificationClick:o}):(0,a.jsx)("div",{className:"text-center py-8 text-stone-500",children:"클래스 정보를 불러올 수 없습니다."})})}),(0,a.jsx)("div",{className:"w-1/2 flex-shrink-0 px-1",children:(0,a.jsx)("div",{className:"h-full overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:(0,a.jsx)(u,{sessionId:v})})})]})})]}):null}},5897:(e,s,t)=>{t.d(s,{BK:()=>c,eu:()=>i,q5:()=>o});var a=t(5155),l=t(2115),n=t(7199),r=t(4269);let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.bL,{ref:s,className:(0,r.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...l})});i.displayName=n.bL.displayName;let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n._V,{ref:s,className:(0,r.cn)("aspect-square h-full w-full",t),...l})});c.displayName=n._V.displayName;let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.H4,{ref:s,className:(0,r.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...l})});o.displayName=n.H4.displayName},6948:(e,s,t)=>{t.d(s,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>r,aR:()=>i});var a=t(5155),l=t(2115),n=t(4269);let r=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});r.displayName="Card";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...l})});i.displayName="CardHeader";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});c.displayName="CardTitle";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...l})});o.displayName="CardDescription";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...l})});d.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"},9238:(e,s,t)=>{t.d(s,{l:()=>f});var a=t(2115),l=t(8720),n=t(1802),r=t(4582),i=t(2101),c=t(2336),o=t(2313);let d={createRefundRequest:e=>(0,o.bE)("/refunds/request",e)};var m=t(1027),u=t(6334);function f(){var e;let{}=(0,u.C)(),s=(0,n.j)(),{data:t,status:f}=(0,r.wV)(),[h,x]=(0,a.useState)(!1),[p,N]=(0,a.useState)(null),y=(0,a.useRef)(new Set),[v,b]=(0,a.useState)([]),[g,j]=(0,a.useState)([]),[E,w]=(0,a.useState)([]),[T,D]=(0,a.useState)([]),[S,I]=(0,a.useState)([]),[C,A]=(0,a.useState)([]),[k,R]=(0,a.useState)(null),[O,F]=(0,a.useState)(null),M="authenticated"===f&&(null==t||null==(e=t.user)?void 0:e.role)==="STUDENT",B=(0,a.useCallback)(async()=>{if(M)try{N(null);let e=await (0,c.H7)();j(e.data||[])}catch(e){N(e instanceof Error?e.message:"학원 정보를 불러오는데 실패했습니다."),j([])}},[M]),_=(0,a.useCallback)(async e=>{if(M)try{if(N(null),!e)return;let s=(await (0,c.L6)(e)).data,t=(null==s?void 0:s.sessions)||[],a=new Map;t.forEach(e=>{let s=e.class.className;a.has(s)||a.set(s,{...e,availableSessions:t.filter(e=>e.class.className===s)})});let l=Array.from(a.values());w(l),D(t)}catch(e){N(e instanceof Error?e.message:"수강 가능한 클래스를 불러오는데 실패했습니다."),w([]),D([])}},[M]),U=(0,a.useCallback)(async e=>{try{if(!e)return;let s=(await (0,c.L6)(e)).data,t=(null==s?void 0:s.sessions)||[];D(t)}catch(e){N(e instanceof Error?e.message:"수강 가능한 세션을 불러오는데 실패했습니다.")}},[]),G=(0,a.useCallback)(async e=>{try{return await (0,c.Cn)({sessionIds:e})}catch(e){throw N(e instanceof Error?e.message:"수강 신청에 실패했습니다."),e}},[]),L=(0,a.useCallback)(async()=>{try{let e=(await (0,c.PB)()).data;return I(e||[]),e||[]}catch(e){throw N(e instanceof Error?e.message:"수강 신청 내역을 불러오는데 실패했습니다."),e}},[]),P=(0,a.useCallback)(async()=>{try{let e=(await (0,c.mK)()).data;return A(e||[]),e||[]}catch(e){throw N(e instanceof Error?e.message:"환불/취소 내역을 불러오는데 실패했습니다."),e}},[]),q=(0,a.useCallback)(async e=>{try{return(await (0,c.vs)(e)).data}catch(e){throw N(e instanceof Error?e.message:"수강 변경용 세션 데이터를 불러오는데 실패했습니다."),e}},[]),W=(0,a.useCallback)(async e=>{try{return await (0,c.Ii)(e)}catch(e){throw N(e instanceof Error?e.message:"수강 변경에 실패했습니다."),e}},[]),V=(0,a.useCallback)(async e=>{let t="refund_".concat(e.sessionEnrollmentId);if(y.current.has(t))throw Error("이미 환불 요청이 진행 중입니다.");y.current.add(t);let a={id:"temp_".concat(Date.now()),sessionId:e.sessionEnrollmentId,className:"환불 요청 중...",teacherName:"선생님",sessionDate:new Date().toISOString().split("T")[0],sessionTime:"09:00-10:00",refundAmount:e.refundAmount||0,status:"REFUND_REQUESTED",reason:e.reason,detailedReason:e.detailedReason,requestedAt:new Date().toISOString(),isOptimistic:!0};try{s((0,i.gi)(a)),l.oR.success("환불 요청을 처리하고 있습니다...",{description:"잠시만 기다려주세요."});let m=await d.createRefundRequest(e);if(m.data&&m.data.id){var n,r,c,o,u,f,h,x,p,v,b,g,j;let e=m.data,d={id:e.id,sessionId:e.sessionEnrollmentId,className:(null==(c=e.sessionEnrollment)||null==(r=c.session)||null==(n=r.class)?void 0:n.className)||"클래스명",teacherName:(null==(h=e.sessionEnrollment)||null==(f=h.session)||null==(u=f.class)||null==(o=u.teacher)?void 0:o.name)||"선생님",sessionDate:(null==(p=e.sessionEnrollment)||null==(x=p.session)?void 0:x.date)||new Date().toISOString().split("T")[0],sessionTime:"".concat((null==(b=e.sessionEnrollment)||null==(v=b.session)?void 0:v.startTime)||"09:00","-").concat((null==(j=e.sessionEnrollment)||null==(g=j.session)?void 0:g.endTime)||"10:00"),refundAmount:e.refundAmount,status:e.status,reason:e.reason,detailedReason:e.detailedReason,requestedAt:e.requestedAt,processedAt:e.processedAt,cancelledAt:e.cancelledAt};return s((0,i.xs)({optimisticId:a.id,realCancellation:d})),l.oR.success("환불 요청이 완료되었습니다!",{description:"승인 대기 중입니다."}),y.current.delete(t),m.data}throw Error("환불 요청 처리에 실패했습니다.")}catch(e){throw s((0,i.Dc)(a.id)),y.current.delete(t),N(e instanceof Error?e.message:"환불 요청 생성에 실패했습니다."),l.oR.error((0,m.P)(e,"환불 요청에 실패했습니다.")),e}},[s]),J=(0,a.useCallback)(async()=>{try{let e=(await (0,c.qx)()).data;R(e||null)}catch(e){N(e instanceof Error?e.message:"사용자 프로필을 불러오는데 실패했습니다.")}},[]),H=(0,a.useCallback)(async e=>{try{let s={};Object.entries(e||{}).forEach(e=>{let[t,a]=e;if(""!==a&&null!=a){if("birthDate"===t&&"string"==typeof a){let e=new Date(a);if(!isNaN(e.getTime())){s[t]=e.toISOString();return}}s[t]=a}});let t=await (0,c.cs)(s);return await J(),t}catch(e){throw N(e instanceof Error?e.message:"사용자 프로필 업데이트에 실패했습니다."),e}},[J]),K=(0,a.useCallback)(async e=>{try{let s=await (0,c.X7)(e);return await B(),s}catch(e){throw N(e instanceof Error?e.message:"학원 가입에 실패했습니다."),e}},[B]),Y=(0,a.useCallback)(async e=>{try{let s=await (0,c.mZ)(e);return await B(),s}catch(e){throw N(e instanceof Error?e.message:"학원 탈퇴에 실패했습니다."),e}},[B]),Z=(0,a.useCallback)(async e=>{try{return await (0,c.dk)(e)}catch(e){throw N(e instanceof Error?e.message:"입금 정보를 불러오는데 실패했습니다."),e}},[]),Q=(0,a.useCallback)(async e=>(await (0,o.Jt)("/classes/".concat(e,"/details"))).data,[]),z=(0,a.useCallback)(async e=>{try{return(await (0,c.KG)(e)).data}catch(e){throw N(e instanceof Error?e.message:"선생님 프로필을 불러오는데 실패했습니다."),e}},[]),X=(0,a.useMemo)(()=>v&&0!==v.length?v.map(e=>{var s;return{id:e.id,classId:e.id,date:e.date,startTime:e.startTime,endTime:e.endTime,currentStudents:e.currentEnrollments||0,maxStudents:e.maxStudents||0,isEnrollable:!1,isFull:e.currentEnrollments>=e.maxStudents,isPastStartTime:new Date(e.date+" "+e.startTime)<new Date,isAlreadyEnrolled:!0,studentEnrollmentStatus:"CONFIRMED",class:{id:e.id,className:e.className||"클래스",level:"BEGINNER",tuitionFee:(null==(s=e.tuitionFee)?void 0:s.toString())||"50000",teacher:{id:0,name:e.teacherName||"선생님"}}}}):[],[v]),$=(0,a.useMemo)(()=>{if(!O){let e=new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),1),endDate:new Date(e.getFullYear(),e.getMonth()+2,0)}}return{startDate:new Date(O.startDate),endDate:new Date(O.endDate)}},[O]),ee=(0,a.useCallback)(e=>{if(!X||0===X.length)return[];let s=e.toISOString().split("T")[0];return X.filter(e=>new Date(e.date).toISOString().split("T")[0]===s)},[X]);return{sessionClasses:v,academies:g,availableClasses:E,availableSessions:T,enrollmentHistory:S,cancellationHistory:C,userProfile:k,convertedSessions:X,calendarRange:$,isLoading:h,error:p,getSessionsByDate:ee,loadAcademies:B,loadAvailableClasses:_,loadAvailableSessions:U,loadEnrollmentHistory:L,loadCancellationHistory:P,enrollSessions:G,loadModificationSessions:q,modifyEnrollments:W,createRefundRequest:V,loadUserProfile:J,updateUserProfile:H,joinAcademyApi:K,leaveAcademyApi:Y,loadSessionPaymentInfo:Z,getClassDetails:Q,getTeacherProfileForStudent:z,clearErrors:()=>N(null)}}}}]);