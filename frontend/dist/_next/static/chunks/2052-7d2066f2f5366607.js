"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2052],{2052:(a,l,e)=>{e.d(l,{W:()=>i});var t=e(2115),n=e(4582),s=e(8241),r=e(2313),c=e(6334);function i(){var a;let{data:l,status:e}=(0,n.wV)(),{handleApiError:i}=(0,c.C)(),[u,o]=(0,t.useState)(null),[p,d]=(0,t.useState)(null),[y,b]=(0,t.useState)([]),[C,k]=(0,t.useState)([]),[f,w]=(0,t.useState)([]),[h,v]=(0,t.useState)([]),[m,J]=(0,t.useState)(!1),[E,g]=(0,t.useState)(null),S="authenticated"===e&&(null==l||null==(a=l.user)?void 0:a.role)==="PRINCIPAL",P=(0,t.useCallback)(async()=>{if(S)try{g(null),J(!0);let a=(await (0,s.cd)()).data;a&&o(a)}catch(a){i(a),g(a.message||"프로필 로드 실패")}finally{J(!1)}},[S,i]),I=(0,t.useCallback)(async()=>{if(S)try{g(null);let a=(await (0,s.Pe)()).data;a&&d(a)}catch(e){var a,l;g((null==(l=e.response)||null==(a=l.data)?void 0:a.message)||"학원 정보 로드 실패")}},[S]),T=(0,t.useCallback)(async()=>{if(S)try{g(null);let a=(await (0,s.kG)()).data;a&&b(a)}catch(e){var a,l;g((null==(l=e.response)||null==(a=l.data)?void 0:a.message)||"클래스 목록 로드 실패")}},[S]),j=(0,t.useCallback)(async()=>{if(S)try{g(null);let a=(await (0,s.XB)()).data;a&&k(a)}catch(e){var a,l;g((null==(l=e.response)||null==(a=l.data)?void 0:a.message)||"선생님 목록 로드 실패")}},[S]),D=(0,t.useCallback)(async()=>{if(S)try{g(null);let a=(await (0,s.Qw)()).data;a&&w(a)}catch(e){var a,l;g((null==(l=e.response)||null==(a=l.data)?void 0:a.message)||"학생 목록 로드 실패")}},[S]),G=(0,t.useCallback)(async()=>{if(S)try{g(null);let a=(await (0,s.p7)()).data;a&&v(a)}catch(e){var a,l;g((null==(l=e.response)||null==(a=l.data)?void 0:a.message)||"세션 목록 로드 실패")}},[S]),U=(0,t.useCallback)(async a=>{if(!S||!a)return null;try{return g(null),(await (0,s.y9)(a)).data||null}catch(a){var l,e;return g((null==(e=a.response)||null==(l=e.data)?void 0:l.message)||"수강생 목록 로드 실패"),null}},[S]),X=(0,t.useCallback)(async()=>{if(S)try{J(!0),g(null),await Promise.all([P(),I(),T(),j(),D(),G()])}catch(e){var a,l;g((null==(l=e.response)||null==(a=l.data)?void 0:a.message)||"데이터 로드 실패")}finally{J(!1)}},[S,P,I,T,j,D,G]),_=(0,t.useCallback)(async a=>{let l=await (0,s.FV)(a);return await P(),l},[P]),q=(0,t.useCallback)(async a=>(0,s.dU)(a),[]),F=(0,t.useCallback)(async a=>(0,s.T2)(a),[]),H=(0,t.useCallback)(async a=>(0,s.bs)(a),[]),N=(0,t.useCallback)(async(a,l)=>(0,s.Tl)(a,l),[]),R=(0,t.useCallback)(async(a,l,e)=>(0,s.n7)(a,l,e),[]),V=(0,t.useCallback)(async(a,l)=>(0,s.Rd)(a,l),[]),B=(0,t.useCallback)(async(a,l)=>(0,s.MY)(a,{contentIds:l}),[]),M=(0,t.useCallback)(async a=>(0,s.JG)(a),[]),O=(0,t.useCallback)(async a=>(0,s.OU)(a),[]),Q=(0,t.useCallback)(async a=>(0,s.IC)(a),[]),Y=(0,t.useCallback)(async a=>{let l=await (0,s.SE)(a);return await I(),l},[I]),A=(0,t.useCallback)(async()=>(0,s.jI)(),[]),L=(0,t.useCallback)(async()=>(0,s.Ey)(),[]),W=(0,t.useCallback)(async a=>(await (0,r.Jt)("/ballet-poses",{params:a?{difficulty:a}:void 0})).data||[],[]),x=(0,t.useCallback)(async a=>(await (0,r.Jt)("/ballet-poses/".concat(a))).data,[]),z=(0,t.useCallback)(a=>y.find(l=>l.id===a),[y]),K=(0,t.useCallback)(a=>C.find(l=>l.id===a),[C]),Z=(0,t.useCallback)(a=>f.find(l=>l.id===a),[f]),$=(0,t.useCallback)(a=>h.filter(l=>l.classId===a),[h]),aa=(0,t.useCallback)(a=>h.filter(l=>new Date(l.date).toDateString()===a.toDateString()),[h]),al=(0,t.useCallback)(async a=>{if(!S)throw Error("Principal 권한이 필요합니다.");try{return g(null),(await (0,s.Sq)(a)).data}catch(t){var l,e;let a=(null==(e=t.response)||null==(l=e.data)?void 0:l.message)||"수강신청 승인 실패";throw g(a),Error(a)}},[S]),ae=(0,t.useCallback)(async(a,l,e)=>{if(!S)throw Error("Principal 권한이 필요합니다.");try{return g(null),(await (0,s.cf)(a,{reason:l,detailedReason:e})).data}catch(l){var t,n;let a=(null==(n=l.response)||null==(t=n.data)?void 0:t.message)||"수강신청 거절 실패";throw g(a),Error(a)}},[S]),at=(0,t.useCallback)(async a=>{if(!S)throw Error("Principal 권한이 필요합니다.");try{return g(null),(await (0,s.mX)(a)).data}catch(t){var l,e;let a=(null==(e=t.response)||null==(l=e.data)?void 0:l.message)||"환불요청 승인 실패";throw g(a),Error(a)}},[S]),an=async(a,l,e)=>{if(!S)throw Error("Principal 권한이 필요합니다.");try{return g(null),(await (0,s.et)(a,{reason:l,detailedReason:e})).data}catch(l){var t,n;let a=(null==(n=l.response)||null==(t=n.data)?void 0:t.message)||"환불요청 거절 실패";throw g(a),Error(a)}};return{profile:u,academy:p,classes:y,teachers:C,students:f,sessions:h,isLoading:m,error:E,isPrincipal:S,loadProfile:P,loadAcademy:I,loadClasses:T,loadTeachers:j,loadStudents:D,loadSessions:G,loadAllData:X,loadSessionEnrollments:U,getClassById:z,getTeacherById:K,getStudentById:Z,getSessionsByClassId:$,getSessionsByDate:aa,approveEnrollment:al,rejectEnrollment:ae,approveRefund:at,rejectRefund:an,updateProfile:_,updateProfilePhoto:q,createClass:F,updateAcademy:Y,getAllEnrollments:A,getAllRefundRequests:L,fetchBalletPoses:W,fetchBalletPose:x,getSessionContents:H,addSessionContent:N,updateSessionContent:R,deleteSessionContent:V,reorderSessionContents:B,removeTeacher:M,removeStudent:O,getStudentSessionHistory:Q}}},8241:(a,l,e)=>{e.d(l,{Ey:()=>p,FV:()=>v,IC:()=>T,JG:()=>P,MY:()=>f,OU:()=>I,Pe:()=>n,Qw:()=>u,Rd:()=>k,SE:()=>w,Sq:()=>J,T2:()=>c,Tl:()=>b,XB:()=>i,bs:()=>y,cd:()=>h,cf:()=>E,dU:()=>m,et:()=>S,jI:()=>o,kG:()=>r,mX:()=>g,n7:()=>C,p7:()=>s,y9:()=>d});var t=e(2313);let n=()=>(0,t.Jt)("/principal/academy"),s=()=>(0,t.Jt)("/principal/sessions"),r=()=>(0,t.Jt)("/principal/classes"),c=a=>(0,t.bE)("/principal/classes",a),i=()=>(0,t.Jt)("/principal/teachers"),u=()=>(0,t.Jt)("/principal/students"),o=()=>(0,t.Jt)("/principal/enrollments"),p=()=>(0,t.Jt)("/principal/refund-requests"),d=a=>(0,t.Jt)("/principal/sessions/".concat(a,"/enrollments")),y=a=>(0,t.Jt)("/principal/sessions/".concat(a,"/contents")),b=(a,l)=>(0,t.bE)("/principal/sessions/".concat(a,"/contents"),l),C=(a,l,e)=>(0,t.yJ)("/principal/sessions/".concat(a,"/contents/").concat(l),e),k=(a,l)=>(0,t.yH)("/principal/sessions/".concat(a,"/contents/").concat(l)),f=(a,l)=>(0,t.yJ)("/principal/sessions/".concat(a,"/contents/reorder"),l),w=a=>(0,t.yJ)("/principal/academy",a),h=a=>(0,t.Jt)(a?"/principal/".concat(a,"/profile"):"/principal/profile"),v=a=>(0,t.yJ)("/principal/profile",a),m=a=>{let l=new FormData;return l.append("photo",a),(0,t.yJ)("/principal/profile/photo",l,{headers:{"Content-Type":"multipart/form-data"}})},J=a=>(0,t.bE)("/principal/enrollments/".concat(a,"/approve")),E=(a,l)=>(0,t.bE)("/principal/enrollments/".concat(a,"/reject"),l),g=a=>(0,t.bE)("/principal/refunds/".concat(a,"/approve")),S=(a,l)=>(0,t.yJ)("/principal/refunds/".concat(a,"/reject"),l),P=a=>(0,t.yH)("/principal/teachers/".concat(a)),I=a=>(0,t.yH)("/principal/students/".concat(a)),T=a=>(0,t.Jt)("/principal/students/".concat(a,"/sessions"))}}]);